<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/mainTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:fn="http://java.sun.com/jsp/jstl/functions"
                >


   <ui:define name="content">
       
        <h:form id="insertForm">
            <p:fieldset>
                
                  <div class="formRowBasic width70">
                    <div class="formLabel width40">        
                        <p:outputLabel id="questionTitleLabel" for="questionTitle" value="Soru Başlığı  "/>
                    </div>
                    <div class="formInput width50">
                        <p:inputText value="#{questionManagedBean.question.questionTitle}" id="questionTitle"
                                    />
                    </div>
                </div>
                <div class="formRowBasic width70">
                    <div class="formLabel width40">        
                        <p:outputLabel id="questionTextLabel" for="questionText" value="Soruyu Giriniz  "/>
                    </div>
                    <div class="formInput width50">
                        <p:editor value="#{questionManagedBean.question.questionText}" id="questionText"
                                    />
                    </div>
                </div>
               
                <div class="formRowBasic width90">
                    <div class="formLabel width70"></div>
                    <div class="formInput width20">
                        <p:commandButton action="#{questionManagedBean.saveQuestion()}" value="Soruyu Kaydet" update="questionList"/>
                    </div>
                </div>
            </p:fieldset>
       
       
       <p:contextMenu for="questionList">
           <p:menuitem value="Önizleme" update=":preview" icon="ui-icon-search" actionListener="#{questionManagedBean.setselctedQuestion()}" />
           <p:menuitem value="Sil" update="questionList" icon="ui-icon-delete" actionListener="#{questionManagedBean.deleteQuestion()}" />
     
        </p:contextMenu>

       <p:dataTable resizableColumns="true" id="questionList" 
                    var="question" value="#{questionManagedBean.questionList}" rowKey="#{question.id}"
                    selection="#{questionManagedBean.selectedQuestion}" selectionMode="single"
                    >
           <p:column headerText="Soru Id" style="width: 40px;" >
               #{question.id}
           </p:column>
           <p:column headerText="Başlık">#{question.questionTitle}</p:column>
           <p:column headerText="Soru Kaynağı">#{question.questionSourceType}</p:column>
           <p:column headerText="Soru  ">
               <p:outputLabel escape="true" value="#{question.questionText.length() gt 100 ? question.questionText.substring(0,100) :question.questionText}"/>
           </p:column>
           <p:column headerText="Soruyu ekleyen">#{question.createdUser}</p:column>
          
        </p:dataTable>
            
        </h:form>     
       <p:dialog id="preview" header="Soru Önizleme" widgetVar="preview"   visible="#{questionManagedBean.tmpSelectedQuestion!=null}"
                 showEffect="fade" hideEffect="fade" resizable="false">
           <p:outputLabel value="#{questionManagedBean.tmpSelectedQuestion.questionText}" escape="false"/>
       </p:dialog>
       

    </ui:define>

</ui:composition>
