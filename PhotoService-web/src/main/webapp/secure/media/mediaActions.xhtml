<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                 template="./../template/mainTemplate.xhtml"
                 xmlns="http://www.w3.org/1999/xhtml"
                 xmlns:h="http://java.sun.com/jsf/html"
                 xmlns:p="http://primefaces.org/ui"
                 xmlns:f="http://xmlns.jcp.org/jsf/core">


    <ui:define name="content">
        <p:growl id="messages" showDetail="true"  />
        <p:fieldset>

            <h:form id="insertForm" enctype="multipart/form-data">

                <div class="formRowBasic width100">
                    <div class="formLabel" style="width: 28%"> 
                        <p:outputLabel id="fetvaCategoryLabel" for="fetvaCategorySelect" 
                                       value="Kategori Seçiniz"/>
                    </div>
                    <div class="formInput width60">
                        <p:autoComplete id="fetvaCategorySelect" multiple="true" value="#{mediaManagedBean.categoryList}" completeMethod="#{mediaManagedBean.completeCategory}"
                                        var="category" itemLabel="#{category.label}" itemValue="#{category}" converter="categoryConverter" forceSelection="true">
                            <p:column style="width:10%">
                                <h:outputText value="#{category.categoryOrder}" />
                            </p:column>

                            <p:column>
                                <h:outputText value="#{category.name}" />
                            </p:column>
                            <p:ajax event="itemSelect" listener="#{mediaManagedBean.onItemSelect}" update="messages" />
                        </p:autoComplete>
                    </div>


                </div>

                <div class="formRowBasic width70">
                    <div class="formLabel width40">        
                        <p:outputLabel id="urlLabel" for="urlInput" value="Url Adresi  "/>
                    </div>
                    <div class="formInput width50">
                        <p:inputText placeholder="URL   adresini giriniz " value="#{mediaManagedBean.media.url}" id="urlInput"
                                     />
                    </div>
                </div>

                <div class="formRowBasic width70">
                    <div class="formLabel width40">        
                        <p:outputLabel id="nameLabel" for="nameInput" value="İsim  "/>
                    </div>
                    <div class="formInput width50">
                        <p:inputText placeholder="Dosya İsmi  giriniz" value="#{mediaManagedBean.media.name}" id="nameInput"
                                     />
                    </div>
                </div>

                <div class="formRowBasic width70">
                    <div class="formLabel width40">        
                        <p:outputLabel id="fileLabel" value="Dosya Seçiniz  "/>
                    </div>
                    <div class="formInput width50">
                        <p:fileUpload fileUploadListener="#{mediaManagedBean.handleFileUpload}"
                                      mode="advanced"  
                                      sizeLimit="10000000" />
                    </div>
                </div>


                <div class="formRowBasic width90">
                    <div class="formLabel width70"></div>
                    <div class="formInput width20">
                        <p:commandButton action="#{mediaManagedBean.saveMedia()}" value="Dosyayı Kaydet" update=":fileList"/>
                    </div>
                </div>

            </h:form>
        </p:fieldset>
        <p:dataTable resizableColumns="true" id="fileList" var="media" value="#{mediaManagedBean.mediaList}">
            <p:column headerText="Email Adresi">#{media.name}</p:column>
            <p:column headerText="Tip  ">#{media.type}</p:column>
            
            <p:column headerText="İmaj"><p:graphicImage value="#{mediaManagedBean.getImage(media.mediaData)}" /></p:column>
            <p:column headerText="Telefon">#{media.siteUser.userName}</p:column>
            <p:column headerText="İşlemler">

                <p:button onclick="" value="Görüntüle"/>

            </p:column>


        </p:dataTable>



    </ui:define>

</ui:composition>
